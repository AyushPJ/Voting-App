(this["webpackJsonpvoting-page"]=this["webpackJsonpvoting-page"]||[]).push([[0],{45:function(t,e,n){},47:function(t,e,n){},74:function(t,e,n){"use strict";n.r(e);var s=n(0),a=n.n(s),i=n(10),c=n.n(i),o=(n(45),n(46),n(18)),l=n(19),d=n(22),r=n(21),h=(n(47),n(77)),u=n(78),j=n(79),p=n(83),b=n(80),f=n(81),v=n(82),x=n(20),O=n.n(x),m=n(1),g=function(t){Object(d.a)(n,t);var e=Object(r.a)(n);function n(t){var s;return Object(o.a)(this,n),(s=e.call(this,t)).submitEnabled=!0,s}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=this.props.selections.map((function(e,n){var s=Object(m.jsx)("td",{className:"text-muted",children:"None Selected"});return null!==e&&(s=Object(m.jsx)("td",{children:e.name})),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:t.props.posts[n]}),s]},n)}));return this.submitEnabled=this.props.selections.every((function(t){return null!=t})),Object(m.jsxs)(a.a.Fragment,{children:[Object(m.jsx)(h.a,{children:Object(m.jsxs)(u.a,{children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{style:{width:"50vh"},children:"Post"}),Object(m.jsx)("th",{style:{width:"50vh"},children:"Candidate Name"})]})}),Object(m.jsx)("tbody",{children:e})]})}),Object(m.jsx)(h.a,{children:Object(m.jsx)(j.a,{style:{width:"100px"},variant:"success",disabled:!this.submitEnabled,onClick:function(e){return t.props.handleSubmit(e)},children:"Submit"})})]})}}]),n}(s.Component),S=function(t){Object(d.a)(n,t);var e=Object(r.a)(n);function n(t){return Object(o.a)(this,n),e.call(this,t)}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e="Please select a candidate to view more info and choose as your "+this.props.post+". You can change your selection afterwards.",n=null;null!==this.props.selectedCandidate&&(e=this.props.candidates[this.props.selectedCandidate.id].caption,n=Object(m.jsx)("img",{src:"/samplepfp.png",width:"256",height:"256"}));var s=this.props.candidates.map((function(e,n){var s=!1;return null!==t.props.selectedCandidate&&n===t.props.selectedCandidate.id&&(s=!0),Object(m.jsx)(p.a.Item,{children:Object(m.jsx)(p.a.Link,{eventKey:n,onClick:function(s){return t.props.handleVote(n,e.name,e.rollNo,s)},active:s,children:e.name})},n)}));return Object(m.jsxs)(h.a,{children:[Object(m.jsx)(b.a,{xs:6,md:4,style:{alignSelf:"center"},children:Object(m.jsx)(f.a,{children:Object(m.jsx)(p.a,{variant:"pills",className:"flex-column",children:s})})}),Object(m.jsxs)(b.a,{xs:12,md:8,style:{alignSelf:"center"},children:[n,Object(m.jsx)("p",{children:e})]})]})}}]),n}(s.Component),y=function(t){Object(d.a)(n,t);var e=Object(r.a)(n);function n(t){var s;return Object(o.a)(this,n),(s=e.call(this,t)).state={posts:[],selections:[null],index:0,candidates:[]},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.fetchPosts(),this.fetchCandidates(this.state.index)}},{key:"fetchPosts",value:function(){var t=this;O.a.get("/candidates/getPosts",{headers:{Accept:"application/json"}}).then((function(e){var n=Object.assign({},t.state);n.posts=e.data.posts,n.selections=n.posts.map((function(){return null})),n.posts.push("Review & Submit"),console.log(n),t.setState(n),t.fetchCandidates(n.posts[0])})).catch((function(t){console.log(t)}))}},{key:"fetchCandidates",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null!==n&&(t=this.state.posts[n]),O.a.get("/candidates/"+t,{headers:{Accept:"application/json"}}).then((function(t){var s=Object.assign({},e.state);null!==n&&(s.index=n),s.candidates=t.data.candidates,e.setState(s)})).catch((function(t){console.log(t)}))}},{key:"handleSelect",value:function(t,e){if(t!==this.state.posts.length-1)this.fetchCandidates(null,t);else{var n=Object.assign({},this.state);n.index=t,this.setState(n)}}},{key:"handleVote",value:function(t,e,n,s){var a=Object.assign({},this.state);a.selections[a.index]={id:t,name:e,rollNo:n},this.setState(a)}},{key:"handleSubmit",value:function(t){var e=window.location.href,n=e.match(/token\S*/).index,s=e.slice(n+6);O.a.post("/vote/",{votes:this.state.selections,token:s},{headers:{Accept:"application/json"}}).then((function(t){1===t.data.voteStatus?window.location.href="/vote/votingSuccessful":2===t.data.voteStatus?window.location.href="/vote/votingUnsuccessful":3===t.data.voteStatus&&(window.location.href="/vote/tokenExpired")})).catch((function(t){console.log(t)})),t.preventDefault()}},{key:"render",value:function(){var t=this,e=this.state.posts.map((function(t,e){return Object(m.jsxs)(v.a.Item,{children:[Object(m.jsx)("img",{src:"/blank.jpg",width:"500",height:"100px"}),Object(m.jsx)(v.a.Caption,{children:t})]},e)})),n=null;return n=this.state.index==this.state.posts.length-1?Object(m.jsx)(g,{selections:this.state.selections,posts:this.state.posts,handleSubmit:function(e){return t.handleSubmit(e)}}):Object(m.jsx)(S,{handleVote:function(e,n,s,a){return t.handleVote(e,n,s,a)},candidates:this.state.candidates,selectedCandidate:this.state.selections[this.state.index],post:this.state.posts[this.state.index]}),Object(m.jsxs)("div",{className:"container-center",children:[Object(m.jsx)(h.a,{children:Object(m.jsx)("h1",{children:"SAC Elections"})}),n,Object(m.jsx)(h.a,{children:Object(m.jsx)(v.a,{slide:!1,interval:null,variant:"dark",activeIndex:this.state.index,onSelect:function(e,n){return t.handleSelect(e,n)},children:e})})]})}}]),n}(s.Component),C=y,k=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,84)).then((function(e){var n=e.getCLS,s=e.getFID,a=e.getFCP,i=e.getLCP,c=e.getTTFB;n(t),s(t),a(t),i(t),c(t)}))};c.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(C,{})}),document.getElementById("root")),k()}},[[74,1,2]]]);
//# sourceMappingURL=main.f5d72811.chunk.js.map